import Link from 'next/link';
import { Container } from '@/app/Container';
import { connection } from 'next/server';
import { getUserAndProfile } from '@/lib/supabase/getUserAndProfile';
import HeaderRightSwitch from '@/app/HeaderRightSwitch';
import { UploadActionsProvider } from '@/app/upload/UploadActionsContext';
import LogoLink from '@/app/LogoLink';

export const dynamic = 'force-dynamic';

export default async function Header() {
    await connection();
    const user = await getUserAndProfile();

    return (
        <header className="bg-white border-b border-gray-200 sticky top-0 z-50">
            <Container as={'nav'}>
                <div className="py-3 flex items-center justify-between">
                    <div className="flex items-center">
                        <div className="flex-shrink-0">
                            <LogoLink>
                                <svg
                                    className="h-14 w-auto md:h-16"
                                    xmlns="http://www.w3.org/2000/svg"
                                    xmlnsXlink="http://www.w3.org/1999/xlink"
                                    version="1.1"
                                    viewBox="0 0 3287.6466875313613 1608.8411650552036"
                                >
                                    <g transform="scale(14.382334376568068) translate(10, 10)">
                                        <defs id="SvgjsDefs1001"></defs>
                                        <g
                                            id="SvgjsG1007"
                                            transform="matrix(1.8142261505126953,0,0,1.8142261505126953,-9.071130502465278,-10.885349682234988)"
                                            fill="var(--color-indigo-600)"
                                        >
                                            <title>Zen</title>
                                            <desc>Created with Sketch.</desc>
                                            <g
                                                xmlns="http://www.w3.org/2000/svg"
                                                strokeWidth="1"
                                                fillRule="evenodd"
                                            >
                                                <g>
                                                    <path
                                                        d="M40.5789349,48.2699132 C43.9825808,46.095434 44.1716433,46.2839757 42.3752891,47.607934 C40.5789349,48.9308507 43.7935183,47.0407465 42.0919558,48.2699132 L41.3357058,49.0261632 C41.3357058,49.0261632 40.1065391,50.4443924 39.2554974,50.5386632 C38.4044558,50.632934 40.2002891,50.4443924 38.9716433,51.0121007 C37.7424766,51.5787674 28.7502891,55.636059 14.2008099,45.0553299 C18.2669558,51.8626215 25.4518516,54.8881424 31.5028933,54.9824132 C31.5028933,54.9824132 29.6112266,54.9824132 30.6518516,55.1714757 C31.6919558,55.3605382 30.1789349,56.7782465 21.2914349,53.4699132 C21.6706016,54.320434 21.7648724,54.6037674 22.8049766,55.1714757 C22.8049766,55.1714757 11.1752891,51.2001215 7.11070578,39.4772049 C7.20497661,40.8949132 7.29924745,42.5027257 7.29924745,42.5027257 C7.29924745,42.5027257 1.43674745,32.1022049 8.43414328,19.2443924 C15.4304974,6.38657986 30.8414349,5.91418402 32.9211224,6.00845486 C35.0013308,6.10272569 46.6294558,8.75012152 49.2768516,11.492309 C51.9247683,14.2334549 47.9539349,12.4376215 47.9539349,12.4376215 C47.9539349,12.4376215 46.6294558,13.1938715 48.8049766,14.3277257 C50.9789349,15.4631424 53.3424766,19.2443924 51.5456016,17.8261632 C49.7497683,16.4084549 52.3966433,19.5282465 52.6804974,19.717309 C52.9638308,19.9063715 48.7096641,17.8261632 49.8445599,19.0553299 C50.9789349,20.2839757 55.8950808,25.673559 54.2883099,27.2813715 C52.6804974,28.8881424 52.1127891,24.4443924 51.8294558,24.161059 C51.5456016,23.876684 52.3034141,30.6844965 51.8294558,31.8183507 C51.3565391,32.9532465 51.4513308,29.2667882 50.5065391,28.1318924 C49.5612266,26.9975174 49.2768516,27.0917882 48.6148724,27.0917882 C47.9539349,27.0917882 46.1575808,25.2959549 45.9679974,24.2553299 C45.7789349,23.2152257 45.2117474,22.9313715 44.3601849,22.0808507 C43.5096641,21.229809 42.1862266,20.3792882 40.5789349,20.473559 C38.9716433,20.5683507 39.8226849,18.5824132 37.0804974,18.5824132 C34.3388308,18.5824132 32.7310183,18.1105382 30.3679974,19.1501215 C28.0049766,20.1902257 23.6554974,21.4188715 23.2768516,21.5131424 C22.8987266,21.607934 27.2476849,19.1501215 27.9101849,18.7714757 C28.5716433,18.3938715 17.6044558,21.229809 15.8081016,25.5787674 C14.0112266,29.9287674 12.4049766,37.3969965 18.5502891,44.2037674 C24.6956016,51.0121007 35.6622683,51.6730382 40.5789349,48.2699132"
                                                        stroke="none"
                                                        fill="var(--color-indigo-600)"
                                                    ></path>
                                                </g>
                                            </g>
                                        </g>
                                        <g
                                            id="SvgjsG1008"
                                            transform="matrix(1.9271948337554932,0,0,1.9271948337554932,108.45824445817209,24.45610341341883)"
                                            fill="#2d2d2d"
                                        >
                                            <path d="M3.1 1.3200000000000003 c1.54 0 2.04 0.86 2.04 2.08 l0 2.98 c0 1.78 -0.68 2.62 -1.94 4.52 c-0.76 1.12 -1.64 2.22 -1.64 3.52 l0 5.58 l-0.76 0 l0 -18.68 l2.3 0 z M4.38 6.6 l0 -2.88 c0 -0.88 -0.2 -1.64 -1.42 -1.64 l-1.4 0 l0 9.9 c0.32 -0.52 0.74 -1.1 1.28 -1.86 c0.98 -1.42 1.54 -2.28 1.54 -3.52 z M7.48 20 l-0.74 0 l0 -18.68 l0.74 0 l0 18.68 z M13.420000000000002 1.3200000000000003 l0 5.06 c0 1.84 -0.58 2.58 -1.72 4.2 c1.16 1.62 1.72 2.38 1.72 4.02 l0 5.4 l-0.76 0 l0 -5.58 c0 -1.18 -0.7 -2.18 -1.4 -3.18 c-0.7 1 -1.42 2 -1.42 3.18 l0 5.58 l-0.76 0 l0 -5.4 c0 -1.64 0.58 -2.4 1.72 -4.02 c-1.12 -1.62 -1.72 -2.36 -1.72 -4.2 l0 -5.06 l0.76 0 l0 5.28 c0 1.18 0.5 2.02 1.42 3.34 c0.9 -1.32 1.42 -2.16 1.4 -3.34 l0 -5.28 l0.76 0 z M17.640000000000004 11.04 l-1.92 0 l0 8.2 l1.92 0 l0 0.76 l-2.66 0 l0 -18.68 l2.66 0 l0 0.76 l-1.92 0 l0 8.2 l1.92 0 l0 0.76 z M19.96 19.24 l0 -17.92 l-0.76 0 l0 18.68 l2.68 0 l0 -0.76 l-1.92 0 z"></path>
                                        </g>
                                        <g
                                            id="SvgjsG1009"
                                            transform="matrix(1.900739073753357,0,0,1.900739073753357,152.85955602786098,24.985219131088925)"
                                            fill="#2d2d2d"
                                        >
                                            <path d="M5.4 3.6400000000000006 l0 2.8 q0 1.04 -0.16 1.72 t-0.51 1.31 t-1.15 1.75 q-0.82 1.12 -1.07 1.7 t-0.25 1.5 l0 5.58 l-1.66 0 l0 -18.68 l2.56 0 q2.24 0 2.24 2.32 z M2.26 2.9800000000000004 l0 7.2 q0.18 -0.24 0.2 -0.26 q0.8 -1.1 1.04 -1.7 t0.24 -1.56 l0 -2.82 q0 -0.4 -0.16 -0.63 t-0.58 -0.23 l-0.74 0 z M11.379999999999999 3.3599999999999994 l0 14.34 q0 2.3 -2.24 2.3 l0.88 0 l-1.18 0 q-1.2 0 -1.72 -0.61 t-0.52 -1.69 l0 -14.34 q0 -1.1 0.52 -1.7 t1.72 -0.6 l0.98 0 l-0.68 0 q2.24 0 2.24 2.3 z M9.72 3.5799999999999983 q0 -0.4 -0.16 -0.63 t-0.58 -0.23 t-0.57 0.23 t-0.15 0.63 l0 13.9 q0 0.4 0.15 0.63 t0.57 0.23 t0.58 -0.23 t0.16 -0.63 l0 -13.9 z M17.36 20 l-1.64 0 l-0.02 -5.72 q0 -0.72 -0.14 -1.21 t-0.54 -1.09 q-0.46 0.7 -0.62 1.22 t-0.16 1.34 l0 5.46 l-1.66 0 l0 -18.68 l2.54 0 q2.24 0 2.24 2.32 l0 2.88 q0 1.32 -0.26 2.1 t-1.04 1.9 q0.76 1.08 1.03 1.85 t0.27 2.03 l0 5.6 z M15.700000000000001 3.84 q0 -0.4 -0.15 -0.63 t-0.57 -0.23 l-0.74 0 l0 7.2 q0.06 -0.06 0.09 -0.12 t0.07 -0.1 q0.8 -1.1 1.05 -1.69 t0.25 -1.51 l0 -2.92 z M23.34 2.9800000000000004 l-1.56 0 l0 17.02 l-1.66 0 l0 -17.02 l-1.56 0 l0 -1.66 l4.78 0 l0 1.66 z M26.44 8.22 q0.24 0.6 1.04 1.7 q0.8 1.12 1.16 1.74 t0.52 1.29 t0.16 1.71 l0 3.04 q0 2.3 -2.24 2.3 l-0.3 0 q-1.2 0 -1.72 -0.61 t-0.52 -1.69 l0 -4.66 l1.66 0 l0 4.44 q0 0.4 0.15 0.63 t0.57 0.23 t0.58 -0.23 t0.16 -0.63 l0 -3.06 q0 -0.92 -0.25 -1.5 t-1.05 -1.7 q-0.8 -1.1 -1.16 -1.74 t-0.51 -1.32 t-0.15 -1.72 l0 -3.08 q0 -1.1 0.52 -1.7 t1.72 -0.6 l0.3 0 q2.24 0 2.24 2.3 l0 4.7 l-1.66 0 l0 -4.48 q0 -0.4 -0.16 -0.63 t-0.58 -0.23 t-0.57 0.23 t-0.15 0.63 l0 3.08 q0 0.96 0.24 1.56 z"></path>
                                        </g>
                                    </g>
                                </svg>
                            </LogoLink>
                        </div>
                    </div>

                    <HeaderRightSwitch user={user} />
                </div>
            </Container>
        </header>
    );
}
